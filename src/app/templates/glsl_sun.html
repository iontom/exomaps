<!-- GLSL shaders -->

<script id="vertexShaderSun" type="x-shader/x-vertex">
uniform vec3 viewVector;
varying float intensity;
void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
    vec3 actual_normal = vec3(modelMatrix * vec4(normal, 0.0));
    intensity = pow( dot(normalize(viewVector), actual_normal), 6.0 );
}
</script>


<script id="fragmentShaderSun" type="x-shader/x-vertex">
varying float intensity;
void main() {
	vec3 glow = vec3(r_val, g_val, b_val) * intensity;
    gl_FragColor = vec4( glow, 1.0 );
}
</script>

<script type="x-shader/x-vertex" id="vertexshader">

    varying vec2 vUv;

    void main() {

        vUv = uv;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

</script>

<script type="x-shader/x-fragment" id="fragmentshader">

    uniform sampler2D baseTexture;
    uniform sampler2D bloomTexture;

    varying vec2 vUv;

    void main() {

        gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );

    }

</script>

<!--vec3 glow = vec3(1,0.6,0.4) * intensity;-->
<!--<script type="application/x-glsl" id="sun-vertex">-->
    <!--varying vec2 vUV;-->

    <!--void main() {-->
        <!--vUV = uv;-->
        <!--vec4 pos = vec4(position, 1.0);-->
        <!--gl_Position = projectionMatrix * modelViewMatrix * pos;-->
    <!--}-->

<!--</script>-->

<!--<script type="application/x-glsl" id="sun-fragment">-->
    <!--uniform sampler2D texture;-->
    <!--uniform sampler2D glow;-->
    <!--uniform float time;-->
    <!--varying vec2 vUV;-->

    <!--void main() {-->
        <!--float glowCycle = 15.0;-->
        <!--float shiftCycle = 10.0;-->
        <!--float timeValue = mod(time, glowCycle);-->
        <!--float remainingTime = glowCycle - timeValue;-->


        <!--vec4 sample = texture2D(texture, vUV);-->
        <!--vec4 sample2 = texture2D(glow, vUV);-->
        <!--float altW = 0.1;-->
        <!--float rIntensity = 0.3;-->
        <!--float gIntensity = 1.0;-->

        <!--if (timeValue > (glowCycle/2.0)) {-->
            <!--timeValue = remainingTime;-->
        <!--}-->
        <!--sample.x = mix(texture2D(texture, vUV).x - 0.02, texture2D(texture, vUV).x + 0.05,-->
                        <!--timeValue * rIntensity * texture2D(texture, vUV).x);-->
        <!--sample.y = mix(texture2D(texture, vUV).y + 0.1, texture2D(texture, vUV).y + 0.2,-->
                        <!--timeValue * gIntensity * texture2D(texture, vUV).y);-->

        <!--timeValue = mod(time, shiftCycle);-->
        <!--remainingTime = shiftCycle - timeValue;-->
        <!--if (timeValue > (shiftCycle/2.0)) {-->
            <!--timeValue = remainingTime;-->
        <!--}-->

        <!--gl_FragColor = vec4(sample.xyz, sample.w);-->
    <!--}-->

<!--</script>-->





        <!--<script type="application/x-glsl" id="sky-vertex">-->
        <!--varying vec2 vUV;-->

        <!--void main() {-->
          <!--vUV = uv;-->
          <!--vec4 pos = vec4(position, 1.0);-->
          <!--gl_Position = projectionMatrix * modelViewMatrix * pos;-->
        <!--}-->
        <!--</script>-->

        <!--<script type="application/x-glsl" id="sky-fragment">-->
        <!--uniform sampler2D texture;-->
        <!--varying vec2 vUV;-->

        <!--void main() {-->
          <!--vec4 sample = texture2D(texture, vUV);-->
          <!--gl_FragColor = vec4(sample.xyz, sample.w);-->
        <!--}-->
        <!--</script>-->

        <!--<script type="application/x-glsl" id="sun-vertex">-->
            <!--varying vec2 vUV;-->

            <!--void main() {-->
                <!--vUV = uv;-->
                <!--vec4 pos = vec4(position, 1.0);-->
                <!--gl_Position = projectionMatrix * modelViewMatrix * pos;-->
            <!--}-->

        <!--</script>-->

        <!--<script type="application/x-glsl" id="sun-fragment">-->
    <!--uniform sampler2D texture;-->
    <!--uniform sampler2D glow;-->
    <!--uniform float time;-->
    <!--varying vec2 vUV;-->

    <!--void main() {-->
        <!--float glowCycle = 15.0;-->
        <!--float shiftCycle = 10.0;-->
        <!--float timeValue = mod(time, glowCycle);-->
        <!--float remainingTime = glowCycle - timeValue;-->


        <!--vec4 sample = texture2D(texture, vUV);-->
        <!--vec4 sample2 = texture2D(glow, vUV);-->
        <!--float altW = 0.1;-->
        <!--float rIntensity = 0.3;-->
        <!--float gIntensity = 1.0;-->

        <!--if (timeValue > (glowCycle/2.0)) {-->
            <!--timeValue = remainingTime;-->
        <!--}-->
        <!--sample.x = mix(texture2D(texture, vUV).x - 0.02, texture2D(texture, vUV).x + 0.05,-->
                        <!--timeValue * rIntensity * texture2D(texture, vUV).x);-->
        <!--sample.y = mix(texture2D(texture, vUV).y + 0.1, texture2D(texture, vUV).y + 0.2,-->
                        <!--timeValue * gIntensity * texture2D(texture, vUV).y);-->

        <!--timeValue = mod(time, shiftCycle);-->
        <!--remainingTime = shiftCycle - timeValue;-->
        <!--if (timeValue > (shiftCycle/2.0)) {-->
            <!--timeValue = remainingTime;-->
        <!--}-->

        <!--gl_FragColor = vec4(sample.xyz, sample.w);-->
    <!--}-->

<!--</script>-->